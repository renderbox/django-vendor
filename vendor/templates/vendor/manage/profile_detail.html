{% extends "vendor/manage/base.html" %}
{% load i18n %}

{% block vendor_content %}

<h2>{% trans 'Admin: Profile Purchase History' %}</h2>
<div class='row'>
  <div class='col-6'>
    <h3>{% trans 'Profile Detail' %}</h3>
  </div>
  <div class='col-6'>
    <h3>{% trans 'Saved Addresses' %}</h3>
  </div>
  <div class='col-6'>
    <p class="m-0 p-0">{% trans 'Name:' %} {{ object.user.name }}</p>
    <p class="m-0 p-0">{% trans 'Last Name:' %} {{ object.user.last_name }}</p>
    <p class="m-0 p-0">{% trans 'Username:' %} {{ object.user.username }}</p>
    <p class="m-0 p-0">{% trans 'Email:' %} {{ object.user.email }}</p>
  </div>
  <div class='col-6'>
    <table class="table">
      <thead>
        <tr>
          <th>#</th>
          <th>Address</th>
        </tr>
      </thead>
      <tbody>
        {% for address in object.addresses.all %}
        <tr>
          <th>{{forloop.counter}}</th>
          <th>{{ address.get_address_display }}</th>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<div class='row'>
  <div class='col-12'>
  </div>
  <div class='col-12'>
  </div>
  <div class='col-12'>
  </div>
  <div class='col-12'>
  </div>
</div>

<div class='row'>
</div>

<div class='row'>
  <h3>{% trans 'Invoices' %}</h3>
  <table class="table mb-0">
    <thead class="thead-dark">
      <tr>
        <th style="min-width: 40px;">{% trans '#' %}</th>
        <th>{% trans 'Date Created' %}</th>
        <th>{% trans 'Status' %}</th>
        <th>{% trans 'Subtotal' %}</th>
        <th>{% trans 'Tax' %}</th>
        <th>{% trans 'Total' %}</th>
        <th>{% trans 'Currency' %}</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for invoice in object.invoices.all %}
      <tr class="table-secondary">
        <th>{{invoice.pk }}</th>
        <th>{{invoice.created|date:'Y-m-d' }}</th>
        <th>{{invoice.get_status_display }}</th>
        <th>{{invoice.subtotal }}</th>
        <th>{{invoice.tax }}</th>
        <th>{{invoice.total }}</th>
        <th colspan="2">{{invoice.currency }}</th>
      </tr>
      <table class="table mb-0">
        <thead class="bg-light">
          <tr>
            <th style="min-width: 40px;">{% trans 'Payments' %}</th>
            <th>{% trans '#' %}</th>
            <th>{% trans 'Transaction' %}</th>
            <th>{% trans 'Amount' %}</th>
            <th>{% trans 'Payee' %}</th>
            <th>{% trans 'Account' %}</th>
            <th>{% trans 'Success' %}</th>
          </tr>
        </thead>
        <tbody>
          {% for payment in invoice.payments.all %}
          <tr>
            <th></th>
            <th>{{payment.pk}}</th>
            <th>{{payment.transaction}}</th>
            <th>{{payment.amount}}</th>
            <th>{{payment.payee_full_name}}</th>
            <th>{{payment.result.account_number}}</th>
            <th>{{payment.success}}</th>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <table class="table mb-0">
        <thead class="bg-light">
          <tr>
            <th style="min-width: 40px;">{% trans 'Receipts' %}</th>
            <th class="text-center">{% trans '#' %}</th>
            <th>{% trans 'Transaction' %}</th>
            <th>{% trans 'Name' %}</th>
            <th>{% trans 'Start Date' %}</th>
            <th>{% trans 'End Date' %}</th>
            <th>{% trans 'Status' %}</th>
            <th>{% trans 'Actions' %}</th>
          </tr>
        </thead>
        <tbody>
          {% for order_item in invoice.order_items.all %}
          {% for receipt in order_item.receipts.all %}
          <tr>
            <th></th>
            <th class="text-center">{{receipt.pk}}</th>
            <th>{{receipt.transaction}}</th>
            <th>{{order_item.name}}</th>
            <th>{{receipt.start_date|date:'Y-m-d'}}</th>
            <th>{{receipt.end_date|date:'Y-m-d'}}</th>
            <th>{{receipt.get_status_display}}</th>
            <th><a class="btn btn-sm btn-warning">{% trans 'Refund' %}</a></th>
          </tr>
          {% endfor %}
          {% endfor %}
          {% endfor %}
        </tbody>
      </table>
    </tbody>
  </table>
</div>
{% endblock %}